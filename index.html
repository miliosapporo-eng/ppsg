import React, { useState, useEffect } from 'react';
import { Camera, Users, BookOpen, ChevronRight, Search, Menu, X, ArrowRight, Heart, Eye, ArrowLeft } from 'lucide-react';

// 記事データ定義
const ARTICLES = [
  {
    id: 1,
    category: 'History',
    subCategory: 'Context',
    title: 'スティーグリッツが見たニューヨーク、そして現代の路上。',
    excerpt: '近代写真の父が切り取った街の「等価」な美しさ。その視点は、現代のストリートスナップにどう受け継がれているのか。',
    bgColor: 'bg-gray-300',
    iconColor: 'text-gray-400'
  },
  {
    id: 2,
    category: 'Technique',
    subCategory: 'Method',
    title: '光を「読む」ということ。自然光ポートレートの作法。',
    excerpt: '機材に頼る前に、まず光の質を知る。レンブラント・ライティングからフラットな光まで、感情を乗せるための技術論。',
    bgColor: 'bg-gray-800',
    iconColor: 'text-gray-500'
  },
  {
    id: 3,
    category: 'Gallery',
    subCategory: 'Review',
    title: '沈黙する風景。東京都写真美術館「記憶の壁」展レビュー。',
    excerpt: '言葉にならない感情を、写真はどのように定着させるのか。キュレーターへのインタビューを交えて紐解く。',
    bgColor: 'bg-gray-100',
    iconColor: 'text-gray-400'
  },
  {
    id: 4,
    category: 'Interview',
    subCategory: 'Philosophy',
    title: '「撮らない」という選択。ある写真家がカメラを置いた理由。',
    excerpt: '氾濫するイメージの中で、あえてシャッターを切らないことの意味を問う。静寂が生む対話についてのロングインタビュー。',
    bgColor: 'bg-gray-200',
    iconColor: 'text-gray-500'
  },
  {
    id: 5,
    category: 'Technique',
    subCategory: 'Analog',
    title: 'アンセル・アダムスのゾーンシステムを、デジタルで再解釈する。',
    excerpt: '適正露出のその先へ。ヒストグラムの山を読むだけでなく、トーンの意図的な操作で絵作りをするための現代的アプローチ。',
    bgColor: 'bg-gray-400',
    iconColor: 'text-gray-200'
  },
  {
    id: 6,
    category: 'History',
    subCategory: 'Masterpiece',
    title: 'ロバート・フランク『The Americans』が壊したもの。',
    excerpt: '美しい構図、正しい露出、幸福なアメリカ。それらすべてを否定した荒々しいスナップショットが、写真史に刻んだ深い傷跡。',
    bgColor: 'bg-gray-900',
    iconColor: 'text-gray-600'
  }
];

// Sub Component: Journal All Page
const JournalAllPage = ({ onBack }) => (
  <div className="pt-32 pb-24 bg-gray-50 min-h-screen">
    <div className="container mx-auto px-6">
      <div className="mb-12">
        <button 
          onClick={onBack}
          className="group flex items-center text-xs tracking-widest text-gray-500 hover:text-gray-900 transition-colors mb-6"
        >
          <ArrowLeft size={14} className="mr-2 group-hover:-translate-x-1 transition-transform" />
          BACK TO HOME
        </button>
        <h2 className="text-4xl md:text-5xl font-serif mb-4">Journal & Columns</h2>
        <p className="text-sm text-gray-500 font-serif">知性を磨く、視点を養うためのアーカイブ。</p>
      </div>

      {/* Categories */}
      <div className="flex flex-wrap gap-4 mb-16 border-b border-gray-200 pb-6">
        {['ALL', 'HISTORY', 'TECHNIQUE', 'GALLERY', 'INTERVIEW'].map((cat, idx) => (
          <button 
            key={cat} 
            className={`text-xs tracking-widest px-4 py-2 transition-colors ${idx === 0 ? 'bg-gray-900 text-white' : 'text-gray-500 hover:bg-gray-200'}`}
          >
            {cat}
          </button>
        ))}
      </div>

      {/* Article Grid */}
      <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12">
        {ARTICLES.map((article) => (
          <article key={article.id} className="group cursor-pointer">
            <div className={`aspect-[4/5] ${article.bgColor} overflow-hidden mb-6 relative`}>
               <div className={`absolute inset-0 group-hover:scale-105 transition-transform duration-700 flex items-center justify-center ${article.iconColor}`}>
                  <span className="font-serif italic text-2xl">{article.category}</span>
               </div>
            </div>
            <div className="space-y-3">
              <span className="text-xs font-bold tracking-widest text-gray-400 uppercase">{article.subCategory}</span>
              <h3 className="text-lg font-serif leading-snug group-hover:text-gray-600 transition-colors">
                {article.title}
              </h3>
              <p className="text-xs text-gray-500 line-clamp-3 leading-relaxed">
                {article.excerpt}
              </p>
              <div className="pt-2">
                <span className="text-[10px] border-b border-gray-300 pb-0.5 text-gray-400 group-hover:text-gray-900 group-hover:border-gray-900 transition-colors">READ MORE</span>
              </div>
            </div>
          </article>
        ))}
      </div>

      {/* Pagination Placeholder */}
      <div className="mt-20 flex justify-center gap-2">
         <span className="w-8 h-8 flex items-center justify-center border border-gray-900 text-gray-900 text-xs">1</span>
         <span className="w-8 h-8 flex items-center justify-center border border-transparent text-gray-400 hover:text-gray-900 text-xs cursor-pointer">2</span>
         <span className="w-8 h-8 flex items-center justify-center border border-transparent text-gray-400 hover:text-gray-900 text-xs cursor-pointer">3</span>
      </div>
    </div>
  </div>
);

// Main App Component
const App = () => {
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [currentView, setCurrentView] = useState('home'); // 'home' | 'journal_all'

  // Scroll detection for header styling
  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // Navigation Handler
  const navigateTo = (view, sectionId = null) => {
    setCurrentView(view);
    setIsMenuOpen(false);
    
    // 画面遷移時にトップへスクロール
    if (view !== 'home' || !sectionId) {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // ホーム内のセクション移動の場合
    if (view === 'home' && sectionId) {
       // Viewの切り替え完了を待つために少し遅延させる
      setTimeout(() => {
        const element = document.getElementById(sectionId);
        if (element) {
          element.scrollIntoView({ behavior: 'smooth' });
        } else {
           // 要素が見つからない場合（View切り替え直後など）はトップへ
           window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      }, 100);
    }
  };

  const navLinks = [
    { name: 'Philosophy', action: () => navigateTo('home', 'philosophy') },
    { name: 'Journal', action: () => navigateTo('journal_all') },
    { name: 'Community', action: () => navigateTo('home', 'community') },
    { name: 'About', action: () => navigateTo('home', 'about') },
  ];

  return (
    <div className="min-h-screen bg-white text-gray-900 font-sans selection:bg-gray-200">
      {/* Navigation */}
      <nav 
        className={`fixed top-0 left-0 w-full z-50 transition-all duration-500 ${
          isScrolled ? 'bg-white/95 backdrop-blur-sm py-4 border-b border-gray-100' : 'bg-transparent py-8'
        }`}
      >
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center gap-2 z-50 cursor-pointer" onClick={() => navigateTo('home')}>
            <div className="flex flex-col">
              <h1 className={`text-xl font-serif tracking-widest font-bold leading-none ${isMenuOpen ? 'text-gray-900' : ''}`}>
                見つめる写真のはじめ型
              </h1>
              <span className={`text-[8px] tracking-[0.15em] mt-1 font-medium ${isMenuOpen ? 'text-gray-500' : 'text-gray-500'}`}>
                PHOTOGRAPHY PHILOSOPHY STUDY GROUP
              </span>
            </div>
          </div>

          {/* Desktop Nav */}
          <div className="hidden md:flex items-center gap-8">
            {navLinks.map((link) => (
              <button 
                key={link.name} 
                onClick={link.action}
                className="text-xs uppercase tracking-[0.2em] hover:text-gray-500 transition-colors"
              >
                {link.name}
              </button>
            ))}
            <button className="bg-gray-900 text-white px-6 py-2 text-xs tracking-widest hover:bg-gray-700 transition-colors">
              JOIN US
            </button>
          </div>

          {/* Mobile Menu Toggle */}
          <button 
            className="md:hidden z-50"
            onClick={() => setIsMenuOpen(!isMenuOpen)}
          >
            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>

        {/* Mobile Nav Overlay */}
        <div className={`fixed inset-0 bg-white z-40 transform transition-transform duration-500 ease-in-out ${
          isMenuOpen ? 'translate-x-0' : 'translate-x-full'
        } md:hidden`}>
          <div className="h-full flex flex-col justify-center items-center gap-8">
            {navLinks.map((link) => (
              <button 
                key={link.name} 
                onClick={link.action}
                className="text-2xl font-serif tracking-widest hover:text-gray-500 transition-colors"
              >
                {link.name}
              </button>
            ))}
          </div>
        </div>
      </nav>

      {/* Main Content Switcher */}
      {currentView === 'home' ? (
        <>
          {/* Hero Section */}
          <header className="relative h-screen flex items-center justify-center overflow-hidden">
            <div className="absolute inset-0 z-0 bg-gray-100">
              <div className="w-full h-full bg-gradient-to-b from-gray-50 to-gray-200 flex items-center justify-center text-gray-300">
                 <div className="w-96 h-96 border border-gray-300 opacity-20 rounded-full blur-3xl absolute top-1/4 left-1/4 animate-pulse"></div>
                 <div className="w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
              </div>
            </div>
            
            <div className="relative z-10 text-center px-6 max-w-4xl mx-auto mt-20">
              <p className="text-xs md:text-sm tracking-[0.3em] mb-6 text-gray-500 uppercase font-medium">
                Photography Philosophy Study Group
              </p>
              <h2 className="text-4xl md:text-7xl font-serif font-medium leading-tight mb-8">
                <span className="block mb-3 md:mb-5">問うから撮るのだ。</span>
                <span className="block">そして取るのだろう。</span>
              </h2>
              <p className="text-sm md:text-base leading-loose text-gray-600 max-w-2xl mx-auto font-serif">
                デジタル革命は写真を民主化しましたが、同時に「考える熱」を分断しました。<br/>
                ここは、写真の歴史を知り、技術を学び、そして同じ熱量を持つ人々と出会う場所。<br/>
                デジタルの奔流に対する、静かなる道標です。
              </p>
            </div>
          </header>

          {/* Philosophy / Statement Section */}
          <section id="philosophy" className="py-24 bg-white">
            <div className="container mx-auto px-6">
              <div className="flex flex-col md:flex-row gap-16 items-start">
                <div className="md:w-1/3">
                  <h3 className="text-sm font-bold tracking-[0.2em] border-l-2 border-gray-900 pl-4 uppercase mb-2">
                    Our Philosophy
                  </h3>
                  <p className="text-4xl font-serif text-gray-200">01</p>
                </div>
                <div className="md:w-2/3">
                  <h4 className="text-2xl md:text-3xl font-serif mb-8 leading-relaxed">
                    暴走する消費から、<br/>
                    蓄積する思考へ。
                  </h4>
                  <div className="grid md:grid-cols-2 gap-12 text-gray-600 leading-7 text-sm text-justify">
                    <p>
                      SNSのマッチング機能は便利ですが、リテラシーの欠如によるトラブルや、表面的な「映え」だけの繋がりが量産されています。私たちが目指すのは、単なるカメラマンとモデルのマッチングではありません。
                    </p>
                    <p>
                      「なぜ撮るのか」「何を伝えたいのか」。その問いを共有できる人々が集うコミュニティです。互いの哲学に共鳴し、敬意を持って作品を創り上げる。そんな本来あるべき写真の関係性を取り戻すための、学びと出会いのプラットフォームです。
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </section>

          {/* Journal / Columns Preview Section */}
          <section id="journal" className="py-24 bg-gray-50">
            <div className="container mx-auto px-6">
              <div className="flex justify-between items-end mb-16">
                <div>
                  <h3 className="text-sm font-bold tracking-[0.2em] uppercase mb-4 text-gray-500">Journal & Columns</h3>
                  <h2 className="text-3xl font-serif">知性を磨く、視点を養う</h2>
                </div>
                <button 
                  onClick={() => navigateTo('journal_all')}
                  className="hidden md:flex items-center text-xs tracking-widest hover:text-gray-600 transition-colors"
                >
                  VIEW ALL <ArrowRight size={14} className="ml-2" />
                </button>
              </div>

              <div className="grid md:grid-cols-3 gap-8">
                {/* 最初の3件だけ表示 */}
                {ARTICLES.slice(0, 3).map((article) => (
                  <article key={article.id} className="group cursor-pointer">
                    <div className={`aspect-[4/5] ${article.bgColor} overflow-hidden mb-6 relative`}>
                       <div className={`absolute inset-0 group-hover:scale-105 transition-transform duration-700 flex items-center justify-center ${article.iconColor}`}>
                          <span className="font-serif italic text-2xl">{article.category}</span>
                       </div>
                    </div>
                    <div className="space-y-3">
                      <span className="text-xs font-bold tracking-widest text-gray-400 uppercase">{article.subCategory}</span>
                      <h3 className="text-lg font-serif leading-snug group-hover:text-gray-600 transition-colors">
                        {article.title}
                      </h3>
                      <p className="text-xs text-gray-500 line-clamp-2">
                        {article.excerpt}
                      </p>
                    </div>
                  </article>
                ))}
              </div>
              
              <div className="md:hidden mt-8 text-center">
                <button 
                  onClick={() => navigateTo('journal_all')}
                  className="inline-flex items-center text-xs tracking-widest hover:text-gray-600 transition-colors border-b border-gray-900 pb-1"
                >
                  VIEW ALL <ArrowRight size={14} className="ml-2" />
                </button>
              </div>
            </div>
          </section>

          {/* Community / Matching Section */}
          <section id="community" className="py-24 bg-gray-900 text-gray-100">
            <div className="container mx-auto px-6">
              <div className="flex flex-col md:flex-row items-center justify-between mb-16 gap-8">
                <div className="max-w-xl">
                  <h3 className="text-sm font-bold tracking-[0.2em] text-gray-400 uppercase mb-4">Quality Matching</h3>
                  <h2 className="text-3xl font-serif mb-6">共鳴するパートナーを探す</h2>
                  <p className="text-sm text-gray-400 leading-relaxed">
                    ここにあるのは、単なる条件検索ではありません。<br/>
                    好きな写真家、目指す表現、大切にしている哲学。<br/>
                    「リテラシー」と「熱量」でフィルタリングされた、安全で質の高い出会いを。
                  </p>
                </div>
                <div className="flex gap-4">
                   <button className="border border-white/20 px-6 py-3 text-xs tracking-widest hover:bg-white hover:text-gray-900 transition-all">
                     I'M A PHOTOGRAPHER
                   </button>
                   <button className="bg-white text-gray-900 px-6 py-3 text-xs tracking-widest hover:bg-gray-200 transition-all">
                     I'M A MODEL / CLIENT
                   </button>
                </div>
              </div>

              {/* Profile Cards */}
              <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                {[1, 2, 3, 4].map((item) => (
                  <div key={item} className="bg-gray-800 p-6 hover:bg-gray-700 transition-colors group cursor-pointer border border-gray-700">
                    <div className="flex justify-between items-start mb-6">
                      <div className="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                        <Users size={20} className="text-gray-300" />
                      </div>
                      <span className="text-[10px] border border-gray-600 px-2 py-1 tracking-wider uppercase text-gray-400">
                        Portrait
                      </span>
                    </div>
                    <h4 className="text-lg font-serif mb-2">Photographer Name</h4>
                    <div className="text-xs text-gray-400 mb-4 h-12 overflow-hidden">
                      「写真は引き算である」という美学のもと、フィルムカメラでの撮影を主に行っています。ソール・ライターが好きです。
                    </div>
                    <div className="flex flex-wrap gap-2 mb-6">
                       <span className="text-[10px] text-gray-500">#Film</span>
                       <span className="text-[10px] text-gray-500">#Art</span>
                       <span className="text-[10px] text-gray-500">#Leica</span>
                    </div>
                    <div className="pt-4 border-t border-gray-600 flex justify-between items-center text-xs text-gray-400">
                      <div className="flex items-center gap-1">
                        <Eye size={14} /> <span>Portfolio</span>
                      </div>
                      <ArrowRight size={14} className="group-hover:translate-x-1 transition-transform" />
                    </div>
                  </div>
                ))}
              </div>
              
              <div className="mt-12 text-center">
                 <p className="text-xs text-gray-500 tracking-widest mb-4">コミュニティへの参加には審査とリテラシーテストがあります</p>
                 <a href="#" className="inline-block border-b border-gray-500 pb-1 text-sm text-gray-300 hover:text-white transition-colors">
                   コミュニティ・ガイドラインを読む
                 </a>
              </div>
            </div>
          </section>

          {/* Feature Sections: Education & Rules */}
          <section className="py-24 bg-white border-b border-gray-100">
            <div className="container mx-auto px-6">
               <div className="grid md:grid-cols-2 gap-16">
                  <div className="space-y-6">
                     <BookOpen size={32} className="text-gray-900" />
                     <h3 className="text-2xl font-serif">ナレッジ・ベース</h3>
                     <p className="text-sm text-gray-600 leading-7">
                        初心者向けのカメラ操作から、写真芸術の潮流、著作権や肖像権に関する法律知識まで。
                        「知らなかった」で済ませないための、クリエイターとしての基礎教養を体系的に学べるライブラリです。
                     </p>
                     <a href="#" className="text-xs font-bold tracking-widest border-b border-gray-900 pb-1 inline-block">START LEARNING</a>
                  </div>
                  <div className="space-y-6">
                     <Heart size={32} className="text-gray-900" />
                     <h3 className="text-2xl font-serif">エシカル・マッチング</h3>
                     <p className="text-sm text-gray-600 leading-7">
                        撮影前のヒアリングシートの義務化、合意書のテンプレート提供、相互評価システム。
                        双方が安心して撮影に没頭できるよう、デジタル時代における「対人関係の作法」をシステムとして実装しています。
                     </p>
                     <a href="#" className="text-xs font-bold tracking-widest border-b border-gray-900 pb-1 inline-block">VIEW SYSTEM</a>
                  </div>
               </div>
            </div>
          </section>
        </>
      ) : (
        <JournalAllPage onBack={() => navigateTo('home')} />
      )}

      {/* Footer */}
      <footer className="bg-white py-16 text-gray-900">
        <div className="container mx-auto px-6 flex flex-col md:flex-row justify-between items-start gap-12">
          <div className="md:w-1/3">
            <h2 className="text-lg font-serif font-bold tracking-widest mb-6">見つめる写真のはじめ型</h2>
            <p className="text-xs text-gray-500 leading-relaxed mb-6">
              写真の鑑賞、技術の習得、そして信頼できるクリエイターとの出会いを紡ぐプラットフォーム。<br/>
              デジタルの速さに対抗し、思考の深さを取り戻すために。
            </p>
          </div>
          
          <div className="grid grid-cols-2 md:grid-cols-3 gap-12 text-xs tracking-widest uppercase">
            <div>
              <h4 className="font-bold mb-4">Content</h4>
              <ul className="space-y-3 text-gray-500">
                <li><button onClick={() => navigateTo('journal_all')} className="hover:text-gray-900 text-left">Journal</button></li>
                <li><a href="#" className="hover:text-gray-900">Interview</a></li>
                <li><a href="#" className="hover:text-gray-900">Gallery Guide</a></li>
              </ul>
            </div>
            <div>
              <h4 className="font-bold mb-4">Community</h4>
              <ul className="space-y-3 text-gray-500">
                <li><a href="#" className="hover:text-gray-900">Find Photographer</a></li>
                <li><a href="#" className="hover:text-gray-900">Find Model</a></li>
                <li><a href="#" className="hover:text-gray-900">Guidelines</a></li>
              </ul>
            </div>
            <div>
              <h4 className="font-bold mb-4">Info</h4>
              <ul className="space-y-3 text-gray-500">
                <li><a href="#" className="hover:text-gray-900">About Us</a></li>
                <li><a href="#" className="hover:text-gray-900">Contact</a></li>
                <li><a href="#" className="hover:text-gray-900">Privacy Policy</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div className="container mx-auto px-6 mt-16 pt-8 border-t border-gray-100 flex justify-between items-center text-[10px] text-gray-400">
           <p>© 2024 MITSUMERU SHASHIN. All Rights Reserved.</p>
           <div className="flex gap-4">
              <span>INSTAGRAM</span>
              <span>X (TWITTER)</span>
           </div>
        </div>
      </footer>
    </div>
  );
};

export default App;
